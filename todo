### ✅ To-Do List du Projet RAG "Boilerplate"

---

#### **Phase 1 : MVP**

*Objectif : Transformer le projet en un outil fonctionnel  à utiliser en local, avec une gestion simple des documents et un comportement robuste face aux erreurs.*

-   **Mieux gérer l'historique :**
    - Implémenter une stratégie de fenêtre glissante ("sliding window") pour ne conserver que les N derniers échanges et éviter de dépasser la limite de contexte du LLM.

-   **Mettre en place plus de Résilience :**
    -   Mettre en place une dégradation gracieuse : si un composant optionnel (ex: query_expansion, reranker) échoue, l'application doit continuer à fonctionner sans lui et logger un avertissement.
    -   **Gestion dynamique du contexte LLM :**
        -   Ajouter un endpoint /models au llm-gateway pour exposer les capacités des modèles (ex: max_tokens).
        -   Au démarrage du rag-core, appeler cet endpoint pour récupérer dynamiquement la context_window du LLM configuré.

-   **Refactorisation et "Code Polishing" :**
    -   Centraliser tous les hyperparamètres du RAG (chunk_size, k, threshold...) dans le fichier config.py.
    -   Découper les fonctions monolithiques (orchestrate_rag_flow) en plus petites fonctions testables.

---

#### **Phase 2 : MLOps & Fondations de Production**

*Objectif : Mettre en place l'outillage pour garantir la qualité, la sécurité, l'automatisation et l'observabilité du projet.*

-   **Mettre en place les Tests (`pytest`) :**
    -   Écrire les **tests unitaires** pour les fonctions critiques (utils, config, parsing des prompts).
    -   Écrire un **test d'intégration** simple pour l'endpoint `/health` et pour vérifier que l'agent route bien vers le bon "Tool".

-   **Construire la Pipeline de CI/CD (GitHub Actions) :**
    -   Mettre en place le workflow de **CI** qui exécute `lint` et les `tests` en parallèle pour chaque service.
    -   Préparer un squelette de workflow de **CD** pour le déploiement.

-   **Architecture du Gateway de LLM :**
    -   Intégrer le Proxy LiteLLM comme un service dédié pour gérer le routing, le fallback et le load balancing entre les fournisseurs de LLM.
    -   Transformer le llm-gateway actuel en une API Gateway légère dont le rôle est :
        -   Sécurité : Authentification des services internes (via clé API).
        -   Abstraction : Masquer le Proxy LiteLLM et fournir un point d'entrée unique et stable.

-   **Activer le Caching :**
    -   Configurer `RedisCache` de LangChain pour mettre en cache les appels LLM.

-   **Sécuriser les APIs :**
    -   Implémenter de la sécurité (authentification par **clé API** par exemple).
    -   Ajouter la validation du type de fichier avec `python-magic`.

---

#### **Phase 3 : Monitoring, Évaluation et Optimisation du RAG**

*Objectif : Mesurer objectivement la performance du RAG et l'améliorer sur la base de données concrètes.*

-   **Mettre en place l'Évaluation (`RAGAs`) et l'Observabilité (`LangSmith`) :**
    -   Intégrer RAGAS (Golden Dataset, évaluations).
    -   Stratégie d'évaluations (schedulées ?)

-   **Monitoring et Analyse de la Latence :**
    -   Mettre en place **Prometheus/Grafana/Loki**.

---

#### **Phase 4 : Déploiement Cloud-Native sur Kubernetes**

*Objectif : Maîtriser le déploiement, la gestion d'environnements et l'automatisation de bout en bout.*

-   **Mettre en place l'Environnement Kubernetes Local :**
    -   Installer et configurer **Kind** ou **Minikube**.

-   **Écrire les Manifestes Kubernetes :**
    -   Créer les fichiers `Deployment`, `Service`, `ConfigMap`, `Secret` pour chaque microservice.
    -   Nginx comme point d'entrée pour le trafic externe.

-   **Gérer les Environnements (`staging` vs. `production`) :**
    -   Mettre en place **Kustomize** pour gérer les variations de configuration.

-   **Mettre à jour le Pipeline de CD (Déploiement Continu) :**
    -   Créer un workflow GitHub Actions pour le **Déploiement Continu**.
    -   Automatiser le déploiement sur **staging**.
    -   Mettre en place une **approbation manuelle** pour le déploiement en **production**.

-   **Porter ça sur GCP**

---

#### **Phase 5 : Expansion des Capacités de l'Agent**

*Objectif : Enrichir l'agent avec de nouvelles compétences et sources d'information.*

-   **Ajouter des Outils Externes :**
    -   Intégrer un outil **Web Search** (ex: `Tavily`).

-   **Diversifier les Sources de Données :**
    -   Ajouter l'ingestion depuis des **URLs**.
    -   gestion des images (**OCR** pour extraire le texte des images, description d'image etc.)

-   **(Avancé) Implémenter le Mode Haute Précision :**
    -   Ajouter la logique de **RAG-Fusion** comme une option configurable.
